{% extends "base.html" %}
{% load static humanize %}

{% block title %}{% block dashboard_title %}대시보드{% endblock %} - MyTube Studio{% endblock %}

{% block extra_head %}
    <!-- Google Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/dashboard_style.css' %}">
    {% block extra_style %}{% endblock %}
{% endblock %}

{% block body_content %}
    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <span class="material-symbols-outlined logo-icon">smart_display</span>
                <h1>MyTube Studio</h1>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    {# `request.resolver_match.url_name`은 현재 요청된 URL의 이름입니다. #}
                    <li class="{% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}"><a href="{% url 'dashboard' %}"><span class="material-symbols-outlined">dashboard</span>대시보드</a></li>
                    <li class="{% if request.resolver_match.url_name == 'analysis' %}active{% endif %}"><a href="{% url 'accounts:analysis' %}"><span class="material-symbols-outlined">bar_chart</span>분석</a></li>
                    <li class="{% if request.resolver_match.url_name == 'contents' %}active{% endif %}"><a href="{% url 'accounts:contents' %}"><span class="material-symbols-outlined">video_library</span>콘텐츠</a></li>
                    <li class="{% if request.resolver_match.url_name == 'monetization' %}active{% endif %}"><a href="{% url 'accounts:monetization' %}"><span class="material-symbols-outlined">monetization_on</span>수익 창출</a></li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <form method="post" action="{% url 'accounts:logout' %}">
                    {% csrf_token %}
                    <button type="submit"><span class="material-symbols-outlined">logout</span>로그아웃</button>
                </form>
            </div>
        </aside>

        <main class="main-content">
            <header class="main-header">
                <h2>안녕하세요, {{ request.user.username }}님!</h2>
                <div class="user-profile">
                    <span class="material-symbols-outlined">notifications</span>
                    <img src="https://i.pravatar.cc/40?u={{ request.user.username }}" alt="User Avatar" class="avatar">
                </div>
            </header>

            {% block content_header %}{% endblock %}

            {% block content %}{% endblock %}
        </main>
    </div>

{% endblock body_content %}